"use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var $=require("jquery"),plugin_1=require("../plugin"),autocomplete_1=require("../../../../ui/components/autocomplete/autocomplete"),gps_1=require("../../../../icon/gps"),PdVisPluginFind=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.getPluginType=function(){return"find"},e.prototype.bindEvent=function(){t.prototype.bindEvent.call(this),this.select(".pdvis-float-item-head").on("click",function(t){var e=$(t.target).closest(".pdvis-panels-float-item").toggleClass("active");e.siblings(".pdvis-panels-float-item").removeClass("active")})},e.prototype.created=function(){var e=this,i={settings:{onPrompt:function(t){for(var i=e.container.getData().nodes,n=[],o=0,s=i;o<s.length;o++){var r=s[o];r.name.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>=0&&n.push(r)}return Promise.resolve(n)},onSearch:function(t){t&&e.container.scrollIntoView(t)}}};this.settings=$.extend(!0,{},i,this.settings),t.prototype.created.call(this)},e.prototype.enable=function(){return this.container.scrollIntoView},e.prototype.initSettings=function(i){return $.extend(!0,{},t.prototype.initSettings.call(this,e.defaultSettings),i)},e.prototype.initTemplate=function(){var t="定位",e=gps_1["default"](20),i=$('<div class="pdvis-find-container"></div>');return this.enable()&&i.append('<div class="pdvis-float-item-head"><div class="pdvis-panels-icon" data-pdui-tooltip="hover" data-pdui-tooltip-position="bottom" title="'+t+'">'+e+'</div><div class="pdvis-panels-tooltip">'+t+'</div></div><div class="pdvis-float-item-detail"><div class="pdvis-find"></div></div>'),this.buildPluginTemplate(i,e,t)},e.prototype.mounted=function(){t.prototype.mounted.call(this),this.enable()&&(this.settings.settings.selector=this.select(".pdvis-find"),this.find=new autocomplete_1.PdUIAutocomplete(this.settings.settings),this.bindEvent())},e.prototype.unbindEvent=function(){t.prototype.unbindEvent.call(this),this.select(".pdvis-float-item-head").off("click")},e.defaultSettings={side:"top",isFloat:!0,settings:{placeholder:"请输入想要查找的节点名称",size:"sm",theme:"normal"}},e}(plugin_1.PdVisPlugin);exports.PdVisPluginFind=PdVisPluginFind;