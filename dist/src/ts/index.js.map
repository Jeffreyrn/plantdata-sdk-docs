{"version":3,"sources":["index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["declare const PdUISelect: any;\r\ndeclare const PdUIAjax: any;\r\ndeclare const PdCommonUtils: any;\r\ndeclare const PdUITab: any;\r\ndeclare const CodeMirror: any;\r\ndeclare const monaco: any;\r\ndeclare const _: any;\r\n// declare const $: any;\r\n// declare const require: any;\r\ntype EditorType = 'codeMirror' | 'vs';\r\n\r\nclass Index {\r\n    private editType: EditorType = 'codeMirror';\r\n    private interval: any;\r\n    pageReady = false;\r\n\r\n    private static vsSupport() {\r\n        const userAgent = navigator.userAgent;\r\n        return !(userAgent.indexOf('compatible') > -1 && userAgent.indexOf('MSIE') > -1 && userAgent.indexOf('Opera') < 0);\r\n    }\r\n\r\n    private static updateTabPos() {\r\n        if (location.hash) {\r\n            const $a = $('a[href=\"' + location.hash + '\"]');\r\n            $a.parent().trigger('click');\r\n            const $p = $a.closest('.pdui-tab-page-item');\r\n            if ($p.length) {\r\n                const id = $p.attr('id');\r\n                $('a[href=\"#' + id + '\"]').parent().trigger('click');\r\n            }\r\n        }\r\n    }\r\n\r\n    constructor() {\r\n        this.init();\r\n    }\r\n\r\n    showApi() {\r\n        const path = localStorage.getItem('path');\r\n        if (path) {\r\n            $('.api-frame iframe').attr('src', 'api/' + path);\r\n        }\r\n    }\r\n\r\n    private init() {\r\n        // this.sw();\r\n        Index.updateTabPos();\r\n        if (Index.vsSupport()) {\r\n            this.editType = 'vs';\r\n            (require as any).config({paths: {'vs': 'assets/vs'}});\r\n            $(window).on('resize', () => {\r\n                this.layout();\r\n            });\r\n        } else {\r\n            $('#editor-change').addClass('hide')\r\n        }\r\n        setTimeout(() => {\r\n            PdUISelect.setValue($('#editor-change'), this.editType);\r\n        }, 0);\r\n        $('[data-gallery]').each((i: number, v: HTMLElement) => {\r\n            const $v = $(v);\r\n            const path = $v.attr('data-gallery');\r\n            this.buildGallery($v, path);\r\n        });\r\n        this.bindEvent();\r\n        this.showApi();\r\n    }\r\n\r\n    private bindEvent() {\r\n        let api = $('#api-frame');\r\n        if (api.length) {\r\n            api.on('load', () => {\r\n                let link = (<HTMLFrameElement>$('#api-frame')[0]).contentWindow.location.href;\r\n                localStorage.setItem('path', link.split('/api/')[1]);\r\n            });\r\n\r\n            (<HTMLFrameElement>api[0]).contentWindow.addEventListener('hashchange', () => {\r\n                let link = (<HTMLFrameElement>api[0]).contentWindow.location.href;\r\n                localStorage.setItem('path', link.split('/api/')[1]);\r\n            });\r\n\r\n            window.addEventListener('storage', (e: any) => {\r\n                if (e.key === 'path') {\r\n                    this.showApi();\r\n                }\r\n            }, false);\r\n        }\r\n        $('.demo-control').on('click', (event) => {\r\n            $(event.currentTarget).parent().toggleClass('on');\r\n            this.resetEditor($(event.currentTarget).closest('.demo-code'));\r\n        });\r\n        $('.demo-btn-reset').on('click', (event) => {\r\n            $(event.currentTarget).closest('.demo-code').find('[demo-tab]').each((i: number, v: HTMLElement) => {\r\n                const coder = $(v).data('coder');\r\n                const code = _.unescape($(v).find('.demo-default').html().trim());\r\n                if (this.editType === 'vs') {\r\n                    coder.setValue(code);\r\n                } else {\r\n                    coder.doc.setValue(code);\r\n                }\r\n            });\r\n        });\r\n        $('.demo-btn-run').on('click', (event) => {\r\n            let message = {};\r\n            if (document.body.clientWidth < 1680) {\r\n                $(event.currentTarget).closest('.demo-code').parent().addClass('on');\r\n            }\r\n            $(event.currentTarget).closest('.demo-code').find('[demo-tab]').each((i: number, v: HTMLElement) => {\r\n                const coder = $(v).data('coder');\r\n                const language = $(v).attr('demo-tab');\r\n                if (this.editType === 'vs') {\r\n                    message[language] = coder.getValue().trim();\r\n                } else {\r\n                    message[language] = coder.doc.getValue().trim();\r\n                }\r\n            });\r\n            const iframe = <HTMLIFrameElement>$(event.currentTarget).closest('.demo-item').find('iframe')[0];\r\n            iframe.contentWindow.postMessage(JSON.stringify(message), '*');\r\n        });\r\n\r\n        $('.demo-btn-fullscreen').on('click', (event) => {\r\n            $(event.currentTarget).closest('.demo-code').toggleClass('on');\r\n            this.resetEditor($(event.currentTarget).closest('.demo-code'));\r\n        });\r\n\r\n        $('.demo-tabs a[href]').on('click', () => {\r\n            setTimeout(() => {\r\n                this.buildCoder();\r\n            }, 30);\r\n        });\r\n    }\r\n\r\n    resetEditor($code: JQuery) {\r\n        $code.find('[demo-tab]').each((i: number, v: HTMLElement) => {\r\n            let code = _.unescape($(v).find('.demo-default').html());\r\n            let coder = $(v).data('coder');\r\n            coder = coder.doc || coder;\r\n            if (coder) {\r\n                code = coder.getValue().trim();\r\n            }\r\n            $(v).find('.CodeMirror').remove();\r\n            $(v).find('.monaco-editor').remove();\r\n            this.updateCoder($(v), code);\r\n        });\r\n    }\r\n\r\n    onCoderChange(coder: string) {\r\n        this['indexService'].editType = coder;\r\n        this['indexService'].buildCoder();\r\n    }\r\n\r\n    private buildCoder() {\r\n        const $container = $('.pdui-tab-page-item.active .active.demo-item');\r\n        PdUIAjax.toggleLoadingStatus($container[0], false);\r\n        PdUIAjax.toggleLoadingStatus($container[0], true);\r\n        this.pageReady = true;\r\n        let inLoading = 0;\r\n        const $iframe = $container.find('iframe');\r\n        if (!$iframe.attr('src')) {\r\n            $iframe.attr('src', $iframe.attr('page-src'));\r\n            this.pageReady = false;\r\n        }\r\n        clearInterval(this.interval);\r\n        this.interval = setInterval(() => {\r\n            if (this.pageReady && inLoading === 0) {\r\n                PdUIAjax.toggleLoadingStatus($container[0], false);\r\n                clearInterval(this.interval);\r\n            }\r\n        }, 150);\r\n        $container.find('[demo-tab]').each((i: number, v: HTMLElement) => {\r\n            const $v = $(v);\r\n            const $default = $v.find('.demo-default');\r\n            const url = $default.attr('href');\r\n            if (url) {\r\n                inLoading++;\r\n                const self = this;\r\n                const id = PdCommonUtils.createId('demo-tab');\r\n                const language = $v.attr('demo-tab');\r\n                const cls = $v.hasClass('active') ? 'active' : '';\r\n                const $nav = $v.attr('id', id).closest('.pdui-card').find('.pdui-tab-nav');\r\n                if (!$nav.find('li[data-language=\"' + language + '\"]').length) {\r\n                    $nav.append('<li class=\"' + cls + '\" data-language=\"' + language + '\"><a href=\"#' + id + '\">' + language + '</a></li>');\r\n                }\r\n                $.ajax(url, {\r\n                    data: {id: id},\r\n                    dataType: 'text',\r\n                    success: function (data: any) {\r\n                        const id1 = this.url.split('?id=')[1];\r\n                        const $v1 = $('#' + id1);\r\n                        $v1.find('.demo-default').html(data).attr('href', '');\r\n                        self.updateCoder($v1, data);\r\n                    },\r\n                    complete: function (xhr, textStatus) {\r\n                        inLoading--;\r\n                        if (xhr.status > 400) {\r\n                            const id2 = this.url.split('?id=')[1];\r\n                            const $v2 = $('#' + id2);\r\n                            self.updateCoder($v2);\r\n                        }\r\n                    }\r\n                });\r\n            } else {\r\n                let code = _.unescape($v.find('.demo-default').html());\r\n                let coder = $(v).data('coder');\r\n                coder = coder.doc || coder;\r\n                if (coder) {\r\n                    code = coder.getValue().trim();\r\n                }\r\n                this.updateCoder($v, code);\r\n            }\r\n        });\r\n    }\r\n\r\n    private updateCoder($v: any, data = '') {\r\n        const language = $v.attr('demo-tab');\r\n        if (this.editType === 'vs' && !$v.find('.monaco-editor').length) {\r\n            $v.find('.CodeMirror').remove();\r\n            (<any>require)(['vs/editor/editor.main'], function () {\r\n                const coder = monaco.editor.create($v[0], {\r\n                    value: data,\r\n                    language: language,\r\n                    theme: 'vs-dark'\r\n                });\r\n                $v.data('coder', coder);\r\n            });\r\n        } else if (this.editType === 'codeMirror' && !$v.find('.CodeMirror').length) {\r\n            $v.find('.monaco-editor').remove();\r\n            const coder = CodeMirror($v[0], {\r\n                mode: 'text/' + language,\r\n                indentWithTabs: true,\r\n                smartIndent: true,\r\n                lineNumbers: true,\r\n                matchBrackets: true,\r\n                autofocus: true,\r\n                theme: 'railscasts',\r\n                extraKeys: {'Alt-/': 'autocomplete'},\r\n                hintOptions: {\r\n                    completeSingle: false\r\n                },\r\n                value: data\r\n            });\r\n            coder.on('keyup', function (cm: any, event: KeyboardEvent) {\r\n                const k = event.keyCode;\r\n                if (k >= 65 && k <= 90) {\r\n                    cm.showHint();\r\n                }\r\n            });\r\n            $v.data('coder', coder);\r\n        }\r\n    }\r\n\r\n    private layout() {\r\n        $('.monaco-editor').each((i: number, v: HTMLElement) => {\r\n            const $container = $(v).parent();\r\n            const coder = $container.data('coder');\r\n            if (coder) {\r\n                coder.layout({\r\n                    width: $container.width(),\r\n                    height: $container.height()\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    private buildGallery($container: JQuery, path: string) {\r\n        let $page = $container.children('.pdui-tab').children('.pdui-tab-page');\r\n        $container.find('.demo-tabs>li>a').each((i: number, v: HTMLElement) => {\r\n            const $a = $(v);\r\n            const type = $a.attr('demo-type');\r\n            const cls = $a.parent().hasClass('active') ? 'active' : '';\r\n            $a.attr('href', '#tab-' + path + '-' + type);\r\n            const html = `\r\n                <div class=\"pdui-tab-page-item ${cls} demo-item\" id=\"tab-${path}-${type}\">\r\n                    <div class=\"\">\r\n                        <div class=\"demo-code\">\r\n                            <div class=\"demo-run\">\r\n                                <button class=\"pdui-btn pdui-btn-sm pdui-btn-primary demo-btn-fullscreen\">\r\n                                    <span class=\"fullscreen\">全屏</span>\r\n                                    <span class=\"auto\">取消全屏</span>\r\n                                </button>\r\n                                <button class=\"pdui-btn pdui-btn-sm pdui-btn-primary-outline demo-btn-reset\">\r\n                                    重置\r\n                                </button>\r\n                                <button class=\"pdui-btn pdui-btn-sm pdui-btn-primary demo-btn-run\">\r\n                                    运行\r\n                                </button>\r\n                            </div>\r\n                            <div class=\"pdui-card\">\r\n                                <div class=\"pdui-card-head\">\r\n                                    <ul class=\"pdui-tab-nav pdui-tab-nav-primary\">\r\n\r\n                                    </ul>\r\n                                </div>\r\n                                <div class=\"pdui-card-body\">\r\n                                    <div class=\"pdui-tab-page\">\r\n                                        <div class=\"pdui-tab-page-item active\" demo-tab=\"javascript\">\r\n                                            <code class=\"demo-default\" href=\"./gallery/${path}/js/${type}.js\">\r\n                                            </code>\r\n                                        </div>\r\n                                        <div class=\"pdui-tab-page-item\" demo-tab=\"html\">\r\n                                            <code class=\"demo-default\" href=\"./gallery/${path}/html/${type}.html\">\r\n                                            </code>\r\n                                        </div>\r\n                                        <div class=\"pdui-tab-page-item\" demo-tab=\"css\">\r\n                                            <code class=\"demo-default\" href=\"./gallery/${path}/css/${type}.css\">\r\n                                            </code>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"demo-control\"><i class=\"icon pdui-font ic-chevron-left\"></i></div>\r\n                        <div class=\"demo-result\">\r\n                            <iframe page-src=\"./gallery/${path}/${type}.html?init=1\" frameborder=\"0\"></iframe>\r\n                        </div>\r\n                    </div>\r\n                </div>`;\r\n            $page.append(html);\r\n        });\r\n    }\r\n\r\n    private sw() {\r\n        if ('serviceWorker' in navigator && location.protocol === 'https:') {\r\n            navigator.serviceWorker.register('/plantdata-sdk/sw.js?t=' + new Date().getTime(),\r\n                {scope: '/plantdata-sdk/'}).then(function (reg) {\r\n\r\n                if (reg.installing) {\r\n                    console.log('Service worker installing');\r\n                } else if (reg.waiting) {\r\n                    console.log('Service worker installed');\r\n                } else if (reg.active) {\r\n                    console.log('Service worker active');\r\n                }\r\n\r\n            }).catch(function (error) {\r\n                // registration failed\r\n                console.log('Registration failed with ' + error);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n$(() => {\r\n    window['indexService'] = new Index();\r\n});\r\n"]}