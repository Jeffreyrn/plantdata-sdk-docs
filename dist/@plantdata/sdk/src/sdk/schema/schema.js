"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var $=require("jquery"),utils_1=require("../utils/utils"),PdSDKSchema=function(){function t(t){this.settings=this.initSettings(t),this.settings.data&&this.setData(this.settings.data)}return t.transformSchema=function(t){if(t&&t.atts)for(var e=0;e<t.atts.length;e++){t.atts[e].domain=t.atts[e].domain.toString();for(var s=0;s<t.atts[e].range.length;s++)t.atts[e].range[s]=t.atts[e].range[s].toString()}else t.atts=[];if(t&&t.types)for(var e=0;e<t.types.length;e++)t.types[e].parentId=t.types[e].parentId.toString(),t.types[e].k=t.types[e].k.toString();else t.types=[];return t},t.prototype.getData=function(){return this.data},t.prototype.load=function(){var t=this;if(this.settings.loader)return this.settings.loader(this.settings);var e=this.settings.ajaxSettings,s=e.queryData||{};s.kgName=this.settings.kgName;var a={url:e.baseUrl+"app/schema",type:"GET"};return a=$.extend(!0,{},a,e),a.url=utils_1.PdSDKUtils.buildUrl(a.url,s),utils_1.PdSDKUtils.ajax(a).then(function(e){return t.setData(e),Promise.resolve(t.data)})},t.prototype.setData=function(e){this.data=t.transformSchema(e)},t.prototype.initSettings=function(e){return $.extend(!0,{},t.defaultSettings,e)},t}();exports.PdSDKSchema=PdSDKSchema;