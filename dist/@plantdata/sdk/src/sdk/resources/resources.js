"use strict";var __extends=this&&this.__extends||function(){var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(t,s)};return function(t,s){function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var $=require("jquery"),resource_1=require("../resource/resource"),tab_1=require("../../ui/components/tab/tab"),component_1=require("../../core/component"),PdSDKResources=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.destroy=function(){for(var t=0,s=this.resources;t<s.length;t++){var r=s[t];r.destroy()}e.prototype.destroy.call(this)},t.prototype.load=function(e){for(var t=0,s=this.resources;t<s.length;t++){var r=s[t];r.load(e)}},t.prototype.onLoaded=function(e,t){var s=t.$el.attr("id");this.$head.find('a[href="#'+s+'"] .pdsdk-resource-res-count').text(e.rsCount||0),this.settings.onLoaded&&this.settings.onLoaded(e,t)},t.prototype.initTemplate=function(){var e=$(this.settings.container);return this.saveOriginClass(e),e.addClass("pdui-tab"),this.$head=$('<ul class="pdui-tab-nav pdui-tab-nav-secondary pdsdk-resource-nav"></ul>'),this.$body=$('<div class="pdsdk-resource-container pdui-tab-page"></div>'),e.append(this.$head),e.append(this.$body),e},t.prototype.mounted=function(){var t=this;e.prototype.mounted.call(this);var s=0;this.resources=[];for(var r=0,o=this.settings.tableSettingsList;r<o.length;r++){var n=o[r],a=0===s?"active":"",i="pdsdk-resource-tab-"+s+"-"+(new Date).getTime(),d=$('<div class="pdui-tab-page-item '+a+'" id="'+i+'"></div>');this.$body.append(d);var u=$.extend(!0,{},{selector:d,ajaxSettings:this.settings.ajaxSettings,onLoaded:function(e,s){t.onLoaded(e,s)}},n);this.resources.push(new resource_1.PdSDKResource(u));var c='<li class="'+a+'"><a href="#'+i+'"><span class="pdsdk-resource-res-name" title="'+u.name+'">'+u.name+'</span><span class="pdsdk-resource-res-count"></span></a></li>';this.$head.append(c),s++}tab_1.PdUITab.updateTabNav(this.$head)},t}(component_1.PdComponent);exports.PdSDKResources=PdSDKResources;