"use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function d(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(d.prototype=i.prototype,new d)}}();Object.defineProperty(exports,"__esModule",{value:!0});var $=require("jquery"),toolbox_1=require("../../../../vis/netchart/plugins/toolbox/toolbox"),editor_edit_concept_1=require("./editor-edit-concept"),editor_edit_instance_1=require("./editor-edit-instance"),editor_edit_instance_attr_1=require("./editor-edit-instance-attr"),editor_delete_1=require("./editor-delete"),editor_add_relation_1=require("./editor-add-relation"),editor_edit_edge_1=require("./editor-edit-edge"),editor_define_attribute_concept_1=require("./editor-define-attribute-concept"),editor_define_relation_concept_1=require("./editor-define-relation-concept"),editor_define_attribute_edge_1=require("./editor-define-attribute-edge"),editor_define_relation_edge_1=require("./editor-define-relation-edge"),editor_hide_1=require("./editor-hide"),editor_merge_relation_1=require("./editor-merge-relation"),editor_add_sub_concept_1=require("./editor-add-sub-concept"),editor_add_siblings_concept_1=require("./editor-add-siblings-concept"),editor_add_sub_instance_1=require("./editor-add-sub-instance"),editor_add_siblings_instance_1=require("./editor-add-siblings-instance"),utils_1=require("../../../../container/utils"),PdSDKPluginEditor=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.getPluginType=function(){return"editor"},e.prototype.bindEvent=function(){var t=this;this.select(".pdvis-editor-control").on("click",function(e){t.$el.toggleClass("expend")}),this.addEvent("selectionChange",function(e){t.$el.height()<20?t.select(".pdvis-editor-control").addClass("hide"):t.select(".pdvis-editor-control").removeClass("hide")})},e.prototype.initSettings=function(i){return $.extend(!0,{},t.prototype.initSettings.call(this,e.defaultSettings),i)},e.prototype.initTemplate=function(){var t="编辑工具",e="",i=this.createContainer("pdvis-editor-container"),d=this.buildPluginTemplate(i,e,t);return this.settings.expend&&d.addClass("expend"),d},e.prototype.createToolItems=function(){for(var t=0,e=this.settings.items;t<e.length;t++){var i=e[t],d=i;switch(d){case"addSiblingsConcept":var n=this.updateSettings(d,this.settings.addSiblingsConceptSettings);this.addToolItem(d,new editor_add_siblings_concept_1.PdSDKEditorAddSiblingsConcept(n));break;case"addSubConcept":var s=this.updateSettings(d,this.settings.addSubConceptSettings);this.addToolItem(d,new editor_add_sub_concept_1.PdSDKEditorAddSubConcept(s));break;case"addSubInstance":var o=this.updateSettings(d,this.settings.addSubInstanceSettings);this.addToolItem(d,new editor_add_sub_instance_1.PdSDKEditorAddSubInstance(o));break;case"addSiblingsInstance":var r=this.updateSettings(d,this.settings.addSiblingsInstanceSettings);this.addToolItem(d,new editor_add_siblings_instance_1.PdSDKEditorAddSiblingsInstance(r));break;case"editConcept":var a=this.updateSettings(d,this.settings.editConceptSettings);this.addToolItem(d,new editor_edit_concept_1.PdSDKEditorEditConcept(a));break;case"defineAttribute":var c=this.updateSettings(d,this.settings.defineAttributeSettings);this.addToolItem(d,new editor_define_attribute_concept_1.PdSDKEditorDefineAttributeConcept(c));break;case"defineRelation":var l=this.updateSettings(d,this.settings.defineRelationSettings);this.addToolItem(d,new editor_define_relation_concept_1.PdSDKEditorDefineRelationConcept(l));break;case"defineAttributeEdge":var _=this.updateSettings(d,this.settings.defineAttributeEdgeSettings);this.addToolItem(d,new editor_define_attribute_edge_1.PdSDKEditorDefineAttributeEdge(_));break;case"defineRelationEdge":var g=this.updateSettings(d,this.settings.defineRelationEdgeSettings);this.addToolItem(d,new editor_define_relation_edge_1.PdSDKEditorDefineRelationEdge(g));break;case"editEdge":var u=this.updateSettings(d,this.settings.editEdgeSettings);this.addToolItem(d,new editor_edit_edge_1.PdSDKEditorEditEdge(u));break;case"delete":var p=this.updateSettings(d,this.settings.deleteSettings);this.addToolItem(d,new editor_delete_1.PdSDKEditorDelete(p));break;case"hide":var h=this.updateSettings(d,{});this.addToolItem(d,new editor_hide_1.PdSDKEditorHide(h));break;case"mergeRelation":var S=this.updateSettings(d,this.settings.mergeRelationSettings);this.addToolItem(d,new editor_merge_relation_1.PdSDKEditorMergeRelation(S));break;case"editInstance":var b=this.updateSettings(d,this.settings.editInstanceSettings);this.addToolItem(d,new editor_edit_instance_1.PdSDKEditorEditInstance(b));break;case"editInstanceAttr":var f=this.updateSettings(d,this.settings.editInstanceAttrSettings);this.addToolItem(d,new editor_edit_instance_attr_1.PdSDKEditorEditInstanceAttr(f));break;case"addRelation":var v=this.updateSettings(d,this.settings.addRelationSettings);this.addToolItem(d,new editor_add_relation_1.PdSDKEditorAddRelation(v))}}var E='<div class="pdvis-editor-control"><div class="pdvis-editor-control-lines"><div class="pdvis-editor-control-line"></div><div class="pdvis-editor-control-line"></div><div class="pdvis-editor-control-line"></div></div></div>';this.$el.prepend(E)},e.prototype.updateSettings=function(t,e){return $.extend(!0,{},{name:t,schema:this.settings.schema,kgName:this.settings.kgName,netChart:this.container,sdkNetChart:this.settings.sdkNetChart,promptSettings:this.settings.promptSettings,ajaxSettings:this.settings.ajaxSettings,tooltip:{enable:!0}},e)},e.prototype.unbindEvent=function(){t.prototype.unbindEvent.call(this),this.select(".pdvis-editor-control").off("click")},e.defaultSettings={side:"right",items:["addSubConcept","addSiblingsConcept","addSubInstance","editConcept","defineAttribute","defineRelation","defineAttributeEdge","defineRelationEdge","editEdge","editInstance","editInstanceAttr","addSiblingsInstance","addRelation","mergeRelation","delete"],expend:utils_1.PdContainerUtils.isLargeScreen()},e}(toolbox_1.PdVisPluginToolBox);exports.PdSDKPluginEditor=PdSDKPluginEditor;