"use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var $=require("jquery"),prompt_1=require("../plugins/prompt/prompt"),page_1=require("../../../vis/netchart/plugins/page/page"),netchart_1=require("../netchart"),filter_1=require("../plugins/filter/filter"),PdSDKGraph=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.buildFilter=function(e){var i=t.prototype.buildFilter.call(this,[{key:"distance",label:"设定显示层数",selected:1,index:0,options:[1,2,3]},{key:"highLevelSize",label:"设定高层节点个数",selected:10,index:6,type:"custom",customType:"slider",settings:{min:10,max:50,step:5}}]);return filter_1.PdSDKPluginFilter.mergeFilterSettings(i,e)},e.prototype.buildLoaderParams=function(e){var i=t.prototype.buildLoaderParams.call(this,e),r=t.prototype.buildGraphLoaderParams.call(this,e);return this.page&&(r.queryData.pageNo=this.page.pageNo,r.queryData.pageSize=this.page.pageSize),$.extend(!0,i,r)},e.prototype.destroyPlugins=function(){t.prototype.destroyPlugins.call(this),this.prompt&&this.prompt.destroy(),this.page&&this.page.destroy()},e.prototype.graphInitSuccess=function(e){t.prototype.graphInitSuccess.call(this,e),e=e.entities,e&&e.length&&this.load(this.transferNode2Param(e[0]),"init-graph")},e.prototype.initNetChart=function(){t.prototype.initNetChart.call(this),this.netChart.$el.addClass("pdsdk-graph")},e.prototype.initPlugins=function(){var e=this;this.settings.advancedPrompt=$.extend(!0,{},{settings:{max:1,positiveBtn:{onclick:function(t){var i=t.getTagData();e.load({id:i[0].id},"user-graph"),t.closeDialog()}}}},this.settings.advancedPrompt),t.prototype.initPlugins.call(this);var i=this.settings;if(i.prompt&&i.prompt.enable){var r={promptSettings:{schema:this.schema,promptSettings:this.settings.promptSettings}},n=this.createSDKPluginSettings(i.prompt,r);this.prompt=new prompt_1.PdSDKPluginPrompt(n)}if(i.page&&i.page.enable){var n=this.createPluginSettings(i.page);this.page=new page_1.PdVisPluginPage(n)}},e.prototype.initSettings=function(i){return $.extend(!0,{},t.prototype.initSettings.call(this,e.defaultSettings),i)},e.prototype.updateFixedNodes=function(){this.updateGraphLoadParams()},e.defaultSettings={pluginSettings:{isVisible:function(t,e){var i=e.getPluginType();return!(["history","filter","prompt"].indexOf(i)<0)||["netChartView","treeView"].indexOf(t)>=0}},prompt:{enable:!0},page:{enable:!0,settings:{pageSize:20}}},e}(netchart_1.PdSDKNetChart);exports.PdSDKGraph=PdSDKGraph;