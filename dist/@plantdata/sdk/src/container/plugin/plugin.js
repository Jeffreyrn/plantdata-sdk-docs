"use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var $=require("jquery"),component_1=require("../../core/component"),panel_box_1=require("../panel-box/panel-box"),float_1=require("../panels/float/float"),side_1=require("../panels/tab/side/side"),common_1=require("../../common/common"),button_1=require("../../ui/components/button/button"),PdPlugin=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.destroy=function(){this.panel instanceof float_1.PdFloatPanel?(t.prototype.destroy.call(this),this.removeDOM()):this.panel instanceof side_1.PdSidePanel&&(this.unbindEvent(),this.panel.removeChild(this.panelId))},e.prototype.createNegativeBtn=function(t,e){var i=$.extend(!0,{type:"primary-outline",size:"sm",html:"取消",cls:""},e,this.settings.negativeBtn);return i.cls+=t||"",button_1.PdUIButton.create(i)},e.prototype.addEvent=function(e,i,n,s){void 0===n&&(n=this.container),void 0===s&&(s=this.getPluginType()),t.prototype.addEvent.call(this,e,i,n,s)},e.prototype.buildPluginTemplate=function(t,e,i,n){if(void 0===n&&(n=i),this.panel instanceof float_1.PdFloatPanel){var s=this.panel,o=$(t).addClass("pdvis-panels-float-item");if(this.settings.cls&&o.addClass(this.settings.cls),this.settings.widthBox){var a=new panel_box_1.PdPanelBox({isOpen:this.settings.isBoxOpen,title:i,tooltip:n,icon:e,body:o});return s.settings.exclusive&&a.on("statusChange",function(t){if(t.status)for(var e in s.boxList)s.boxList.hasOwnProperty(e)&&(s.boxList[e]===a||s.boxList[e].isClosedOrMini()||s.boxList[e].updateStatus("close"))}),this.panelId=s.addBox(a),a.$el}return this.panelId=this.panel.addChild(o),o}if(this.panel instanceof side_1.PdSidePanel){var l="fixed"===this.panel.settings.mode&&this.settings.active,o=$(t);return this.settings.cls&&o.addClass(this.settings.cls),this.panelId=this.panel.addChild(o,{icon:e,title:i,active:l,tooltip:n}),this.panel.$el}},e.prototype.createBtn=function(){var t=this,e=!1;if(this.settings.positiveBtn&&this.settings.positiveBtn.enable&&(e=!0,this.$positiveBtn=$(this.createPositiveBtn("pdvis-btn-positive")),this.$positiveBtn.on("click",function(){t.settings.positiveBtn&&t.settings.positiveBtn.onclick?t.settings.positiveBtn.onclick(t):t.onPositiveBtnClick()})),this.settings.negativeBtn&&this.settings.negativeBtn.enable&&(e=!0,this.$negativeBtn=$(this.createNegativeBtn("pdvis-btn-negative")),this.$negativeBtn.on("click",function(){t.settings.negativeBtn&&t.settings.negativeBtn.onclick?t.settings.negativeBtn.onclick(t):t.onNegativeBtnClick()})),e){var i=$('<div class="pdvis-plugin-foot"></div>');this.$positiveBtn&&i.append(this.$positiveBtn),this.$negativeBtn&&i.append(this.$negativeBtn),this.getMainContainer().append(i)}},e.prototype.createPositiveBtn=function(t,e){var i=$.extend(!0,{type:"primary",size:"sm",html:"确定",cls:""},e,this.settings.positiveBtn);return i.cls+=t||"",button_1.PdUIButton.create(i)},e.prototype.created=function(){t.prototype.created.call(this),this.insId=common_1.PdCommonUtils.createId("plugin-"+this.getPluginType()+"-"),this.container=this.settings.container,this.panel=this.container.getSidePanel(this.settings.side,this.settings.isFloat)},e.prototype.getMainContainer=function(){return this.$el},e.prototype.hidePanel=function(){this.panel instanceof side_1.PdSidePanel&&"overlay"===this.panel.settings.mode&&this.panel.hideTabPanel(this.panelId)},e.prototype.initSettings=function(i){return $.extend(!0,{},t.prototype.initSettings.call(this,e.defaultSettings),i)},e.prototype.mounted=function(){t.prototype.mounted.call(this),this.createBtn(),this.updateStyle()},e.prototype.onPositiveBtnClick=function(){},e.prototype.onNegativeBtnClick=function(){this.hidePanel()},e.prototype.updateStyle=function(){this.settings.style&&this.$el.css(this.settings.style)},e.defaultSettings={},e}(component_1.PdComponent);exports.PdPlugin=PdPlugin;