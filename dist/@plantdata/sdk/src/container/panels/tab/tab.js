"use strict";var __extends=this&&this.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function a(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}}();Object.defineProperty(exports,"__esModule",{value:!0});var $=require("jquery"),common_1=require("../../../common/common"),panel_1=require("../panel"),PdTabPanel=function(t){function i(i){var e=t.call(this,i)||this;return e.childSettings={},e}return __extends(i,t),i.prototype.activeChild=function(t){this.showTabPanel(t)},i.prototype.activeChildPage=function(t){var i=this.select("#"+t);i.hasClass("active")||i.addClass("active").siblings(".active").removeClass("active")},i.prototype.activeChildTab=function(t){this.activeId=t;var i=this.select('[data-vis-id="'+t+'"]');i.hasClass("active")||i.addClass("active").siblings(".active").removeClass("active")},i.prototype.addChild=function(t,i){void 0===i&&(i={}),this.$tabsContainer||this.createTabsContainer();var e=i.id||$(t).attr("id")||common_1.PdCommonUtils.createId("panel-");i.id=e;var a,n=this.addTab(i);if(t){var s=this.addPage(t,i);a=$([n[0],s[0]])}else a=n;return this.childSettings[e]=i,this.children[e]={hidden:!1,$el:a},e},i.prototype.getChildLength=function(){return this.$tabsContainer.children(".pdvis-panels-tab").length},i.prototype.hideActivePanel=function(){this.hideTabPanel(this.activeId)},i.prototype.hideTabPanel=function(t){this.activeId=null;var i=this.select('[data-vis-id="'+t+'"]'),e=this.select("#"+t);i.removeClass("active"),e.removeClass("active"),this.hidePanel()},i.prototype.removeChild=function(t){this.$pagesContainer.find("#"+t).remove(),this.$tabsContainer.find('.pdvis-panels-tab[data-vis-id="'+t+'"]').remove()},i.prototype.showTabPanel=function(t){var i=this.childSettings[this.select(".active[data-vis-id]").attr("data-vis-id")];this.activeChildTab(t),this.activeChildPage(t),this.showPanel(),this.settings.onTabChange&&this.settings.onTabChange(this.childSettings[t],i)},i.prototype.toggleTabPanel=function(t,i){var e=this.select('[data-vis-id="'+t+'"]');i||!e.hasClass("active")?this.showTabPanel(t):this.hideTabPanel(t)},i.prototype.addPage=function(t,i){var e=i.active?"active":"",a=$('<div class="pdvis-panels-page '+e+'" id="'+i.id+'"></div>');return a.append(t),this.$pagesContainer.append(a),a},i.prototype.addTab=function(t){var i=this,e=t.title||"",a=void 0!==t.tooltip?t.tooltip:e,n=t.tooltipPosition||"bottom",s=t.icon?'<div class="pdvis-panels-icon" data-pdui-tooltip="hover" data-pdui-tooltip-position="'+n+'" title="'+a+'">'+t.icon+"</div>":"",o=s+(e?'<div class="pdvis-panels-tooltip">'+e+"</div>":""),d=t.active?"active":"",r=$('<div class="pdvis-panels-tab '+d+'" data-vis-id="'+t.id+'"></div>');return r.append(o),this.$tabsContainer.append(r),r.on("click",function(){i.showTabPanel(t.id)}),r},i.prototype.createTabsContainer=function(){this.$tabsContainer=$('<div class="pdvis-panels-tabs"></div>'),this.$pagesContainer=$('<div class="pdvis-panels-pages"></div>'),this.$el.append(this.$tabsContainer),this.$el.append(this.$pagesContainer)},i.prototype.initSettings=function(e){return $.extend(!0,{},t.prototype.initSettings.call(this,i.defaultSettings),e)},i}(panel_1.PdPanel);exports.PdTabPanel=PdTabPanel;