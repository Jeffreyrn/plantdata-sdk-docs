"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var $=require("jquery"),prefix_1=require("../prefix"),elecreator_1=require("../../../core/elecreator"),PdUIModal=function(){function e(){}return e.close=function(a,t){void 0===t&&(t={});var o=!0;if(t.beforeClose){var c=t.beforeClose(a,t);c===!1&&(o=!1)}o&&(t.onClosed&&e.addListener(a,t,t.onClosed,"0"),a.removeClass(e.clsShowName),$("html."+e.clsPerspectiveName).removeClass(e.clsPerspectiveName),$("."+e.clsBackdropName).remove())},e.open=function(a,t){void 0===t&&(t={}),t=$.extend(!0,{},e.defaultSettings,t);var o=!0;if(t.beforeOpen){var c=t.beforeOpen(a,t);c===!1&&(o=!1)}if(o){t.onOpened&&e.addListener(a,t,t.onOpened,"1");var s=parseInt(a.attr(e.attrEffect)||(t.event?"0":"1"),10);if(0===s){var r=$(t.event.currentTarget).offset(),l="translateX(calc("+r.left+"px - "+$(window).width()/2+"px + 50%))"+(" translateY(calc("+r.top+"px - "+$(window).height()/2+"px + 50%)) scale(0.2)");a.find("."+e.clsContentName).css("transform",l),setTimeout(function(){a.addClass(e.clsShowName)},180)}else a.addClass(e.clsShowName);var n=elecreator_1.PdEleCreator.createEle("div",{cls:e.clsBackdropName}),d=$(n).appendTo("body"),i=function(){e.close(a,t)};a.find("."+e.clsCloseName).on("click",i),t.backDrop&&d.on("click",i),t.esc&&$("body").on("keydown",function(e){var a=e.keyCode||e.which||e.charCode;27===a&&i()}),s>16&&s<20&&setTimeout(function(){$("html").addClass(e.clsPerspectiveName)},25)}},e.addListener=function(a,t,o,c){setTimeout(function(){var s=a.find("."+e.clsContentName).css("opacity");s===c?o(a):"0"!==s&&e.addListener(a,t,o,c)},0)},e.defaultSettings={backDrop:!0,esc:!0},e.attrEffect=prefix_1["default"].attr+"modal-effect",e.clsName=prefix_1["default"].cls+"modal",e.cls="."+e.clsName,e.clsBackdropName=e.clsName+"-backdrop",e.clsCloseName=e.clsName+"-close",e.clsContentName=e.clsName+"-content",e.clsPerspectiveName=e.clsName+"-perspective",e.clsShowName=e.clsName+"-show",e}();exports.PdUIModal=PdUIModal;