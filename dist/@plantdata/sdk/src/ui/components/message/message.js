"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var $=require("jquery"),prefix_1=require("../prefix"),spin_1=require("../spin/spin"),elecreator_1=require("../../../core/elecreator"),PdUIMessage=function(){function e(){}return e.create=function(a,c){var t=e.defaultSettings;c=$.extend(!0,{},t,c);var s=$("body").find(e.cls);if(!s.length){var n=c.position?e.clsName+"-"+c.position:"",r=elecreator_1.PdEleCreator.createEle("div",{cls:e.clsName+" "+n});s=$(r).appendTo("body")}var o=$(a).appendTo(s);o.find("."+e.clsCloseName).on("click",function(){e.close(o,c)}),setTimeout(function(){o.find("."+e.clsContentName).addClass(e.clsShowName);var a=c.delay||e.defaultSettings.delay;setTimeout(function(){e.close(o,c)},a),c.countdown&&e.countdown(o,Math.floor(a/1e3))},180)},e.createMessage=function(a,c,t){void 0===c&&(c={});var s="",n=e.clsName+"-"+t;switch(t){case"info":case"success":case"error":case"warn":s=elecreator_1.PdEleCreator.createEle("div",{cls:e.clsFlagName+" "+e.clsFlagCircleName});break;case"loading":s=spin_1.PdUISpin.create({size:"sm",cls:e.clsFlagName});break;default:n=""}var r=elecreator_1.PdEleCreator.createEle("span",{cls:e.clsTextName,html:a}),o=s;c.close&&(o+=elecreator_1.PdEleCreator.createEle("div",{cls:e.clsCloseName})),c.countdown&&(o+=elecreator_1.PdEleCreator.createEle("div",{cls:e.clsCountdownName})),o+=r;var l=elecreator_1.PdEleCreator.createEle("div",{cls:e.clsContentName,html:o});return elecreator_1.PdEleCreator.createEle("div",{cls:e.clsContentContainerName+" "+n,html:l})},e.error=function(a,c){e.create(e.createMessage(a,c,"error"),c)},e.info=function(a,c){e.create(e.createMessage(a,c,"info"),c)},e.loading=function(a,c){e.create(e.createMessage(a,c,"loading"),c)},e.success=function(a,c){e.create(e.createMessage(a,c,"success"),c)},e.warn=function(a,c){e.create(e.createMessage(a,c,"warn"),c)},e.warning=function(a,c){e.warn(a,c)},e.addListener=function(a,c,t,s){setTimeout(function(){var n=a.find("."+e.clsContentName).css("opacity");n===s?t(a):"0"!==n&&e.addListener(a,c,t,s)},0)},e.close=function(a,c){a.find("."+e.clsContentName).removeClass(e.clsShowName),e.addListener(a,c,function(){a.remove()},"0")},e.countdown=function(a,c){a.find("."+e.clsCountdownName).text(c+"s"),setTimeout(function(){e.countdown(a,c-1)},1e3)},e.defaultSettings={delay:1500},e.clsName=prefix_1["default"].cls+"message",e.cls="."+e.clsName,e.clsCloseName=e.clsName+"-close",e.clsContentName=e.clsName+"-content",e.clsContentContainerName=e.clsName+"-content-container",e.clsCountdownName=e.clsName+"-countdown",e.clsFlagName=e.clsName+"-flag",e.clsFlagCircleName=e.clsName+"-flag-circle",e.clsShowName=e.clsName+"-show",e.clsTextName=e.clsName+"-text",e}();exports.PdUIMessage=PdUIMessage;