"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var $=require("jquery"),prefix_1=require("../prefix"),common_1=require("../../../common/common"),elecreator_1=require("../../../core/elecreator"),PdUINotification=function(){function e(){}return e.close=function(t){for(var r in e.queue)if(e.queue.hasOwnProperty(r))for(var o=e.queue[r],a=0,c=o;a<c.length;a++){var n=c[a];if(n.settings.id===t){var i=$("#"+t);e.remove(i,n.settings);break}}},e.custom=function(t,r){return e.addToQueue(t,r,"")},e.error=function(t,r){return e.addToQueue(t,r,"error")},e.info=function(t,r){return e.addToQueue(t,r,"info")},e.success=function(t,r){return e.addToQueue(t,r,"success")},e.warn=function(t,r){return e.addToQueue(t,r,"warn")},e.warning=function(t,r){return e.warn(t,r)},e.addListener=function(t,r,o,a){setTimeout(function(){var c=t.find("."+e.clsContentName).css("opacity");c===a?o(t):"0"!==c&&e.addListener(t,r,o,a)},0)},e.addToQueue=function(t,r,o){void 0===r&&(r={});var a=r.position||e.defaultSettings.position;r.position=a,r.id=common_1.PdCommonUtils.createId(e.clsName+"-");var c=e.queue[a]||[];return c.push({HTML:e.createNotification(t,r,o),settings:r}),e.queue[a]=c,e.create(),r.id},e.create=function(){for(var t in e.queue)if(e.queue.hasOwnProperty(t))for(var r=e.queue[t],o=0,a=0,c=r;a<c.length;a++){var n=c[a];if(!n.visible){o<3&&(n.visible=!0,e.show(n.HTML,n.settings));break}o++}},e.createNotification=function(t,r,o){var a=e.clsName+"-"+o;switch(o){case"info":break;case"success":break;case"error":break;case"warn":break;default:a=""}var c="";if(void 0!==r.icon){var n=elecreator_1.PdEleCreator.createEle("img",{atts:{src:r.icon}});c=elecreator_1.PdEleCreator.createEle("div",{cls:e.clsFlagName,html:n})}else c=elecreator_1.PdEleCreator.createEle("div",{cls:e.clsFlagName+" "+e.clsFlagCircleName});var i=elecreator_1.PdEleCreator.createEle("div",{cls:e.clsTitleName,html:t}),l=elecreator_1.PdEleCreator.createEle("div",{cls:e.clsDescName,html:r.body||"&nbsp;"}),s=elecreator_1.PdEleCreator.createEle("div",{cls:e.clsTextName,html:i+l}),u=elecreator_1.PdEleCreator.createEle("div",{cls:e.clsCloseName}),d=elecreator_1.PdEleCreator.createEle("div",{cls:e.clsContentName,html:c+s+u});return elecreator_1.PdEleCreator.createEle("div",{cls:e.clsContentContainerName+" "+a,atts:{id:r.id},html:d})},e.show=function(t,r){var o=e.defaultSettings;r=$.extend(!0,{},o,r);var a=e.clsName+" "+e.clsName+"-"+r.position,c=e.cls+e.cls+"-"+r.position,n=$("body").find(c);if(!n.length){var i=elecreator_1.PdEleCreator.createEle("div",{cls:a});n=$(i).appendTo("body")}var l=$(t).appendTo(n);l.find("."+e.clsCloseName).on("click",function(){e.remove(l,r)}),setTimeout(function(){l.find("."+e.clsContentName).addClass(e.clsShowName),r.onClick&&l.on("click",function(){r.onClick(r)}),r.onShow&&r.onShow(r),r.delay&&setTimeout(function(){e.remove(l,r)},r.delay)},180)},e.remove=function(t,r){t.find("."+e.clsContentName).removeClass(e.clsShowName),e.addListener(t,r,function(){t.remove();for(var o=e.queue[r.position],a=0;a<o.length;a++){var c=o[a];if(c.settings.id===r.id){o.splice(a,1);break}}e.create()},"0"),r.onClose&&r.onClose(r)},e.defaultSettings={delay:4500,position:"topRight"},e.clsName=prefix_1["default"].cls+"notification",e.cls="."+e.clsName,e.clsCloseName=e.clsName+"-close",e.clsContentName=e.clsName+"-content",e.clsContentContainerName=e.clsName+"-content-container",e.clsDescName=e.clsName+"-desc",e.clsFlagName=e.clsName+"-flag",e.clsFlagCircleName=e.clsName+"-flag-circle",e.clsShowName=e.clsName+"-show",e.clsTextName=e.clsName+"-text",e.clsTitleName=e.clsName+"-title",e.queue={},e}();exports.PdUINotification=PdUINotification;