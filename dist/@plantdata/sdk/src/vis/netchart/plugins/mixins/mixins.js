"use strict";var __extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])})(t,e)};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var $=require("jquery"),lodash_1=require("lodash"),plugin_1=require("../plugin"),keyboard_arrow_down_1=require("../../../../icon/keyboard-arrow-down"),PdVisPluginMixins=function(i){function t(t){var e=i.call(this,t)||this;return e.$children=[],e}return __extends(t,i),t.prototype.addChild=function(i){void 0===i&&(i={});var t=$('<div class="pdvis-mixins-header"></div>'),e=$('<div class="pdvis-mixins-item '+(i.cls||"")+'"><div class="pdvis-mixins-content"></div></div>');return i.hideHeader||e.prepend(t),this.updateHeader(e,i.title,i.icon),this.updateBody(e,i.body),this.$children.push({index:i.index||0,child:e,parent:i.parent}),this.orderChildren(),e},t.prototype.getBody=function(i){return i.find(".pdvis-mixins-content")},t.prototype.getHeader=function(i){return i.find(".pdvis-mixins-header")},t.prototype.updateBody=function(i,t){this.getBody(i).empty().append(t),this.orderChildren()},t.prototype.updateHeader=function(i,t,e){var n=$('<div class="pdvis-mixins-title"></div>');e&&n.append('<span class="pdvis-mixins-title-icon">'+e+"</span>"),t&&n.append('<span class="pdvis-mixins-title-text">'+t+"</span>");var r=this.getHeader(i).empty();r.append(n);var d=keyboard_arrow_down_1["default"](24);r.append('<div class="pdvis-mixins-header-close">'+d+"</div>"),this.orderChildren()},t.prototype.bindEvent=function(){i.prototype.bindEvent.call(this),this.$el.on("click",".pdvis-mixins-header",function(i){$(i.target).closest(".pdvis-mixins-item").toggleClass("close")})},t.prototype.createTemplate=function(i,t,e){void 0===e&&(e=i);var n='<div class="pdvis-mixins-panel"><div class="pdvis-mixins-body"></div></div>';return this.buildPluginTemplate(n,t,i,e)},t.prototype.initSettings=function(e){return $.extend(!0,{},i.prototype.initSettings.call(this,t.defaultSettings),e)},t.prototype.mounted=function(){i.prototype.mounted.call(this),this.bindEvent()},t.prototype.orderChildren=function(){for(var i=lodash_1.orderBy(this.$children,["index"],["asc"]),t=0,e=i;t<e.length;t++){var n=e[t];n.parent||this.select(".pdvis-mixins-body").append(n.child)}for(var r=0,d=i;r<d.length;r++){var n=d[r];n.parent&&this.$el.find(n.parent).append(n.child)}},t.prototype.unbindEvent=function(){i.prototype.unbindEvent.call(this),this.$el.off("click",".pdvis-mixins-header")},t.defaultSettings={side:"right"},t}(plugin_1.PdVisPlugin);exports.PdVisPluginMixins=PdVisPluginMixins;