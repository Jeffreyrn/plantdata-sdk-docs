"use strict";var __extends=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var $=require("jquery"),component_1=require("../../../core/component"),modal_1=require("../../../ui/components/modal/modal"),button_1=require("../../../ui/components/button/button"),close_1=require("../../../icon/close"),PdVisModal=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.close=function(t){void 0===t&&(t={}),modal_1.PdUIModal.close(this.$el,t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeDOM()},e.prototype.open=function(t){void 0===t&&(t={}),this.settings.title instanceof Function&&this.updateTitle(this.settings.title(this.settings)),this.settings.body instanceof Function&&this.updateBody(this.settings.body(this.settings)),modal_1.PdUIModal.open(this.$el,t)},e.prototype.updateBody=function(t){this.createBody(),this.$body.empty().append(t)},e.prototype.updateTitle=function(t){this.createHeader(),this.select(".pdui-modal-title").empty().append(t)},e.prototype.createBody=function(){if(!this.$body){var t=this.getSelector(this.settings.body);this.$body=$('<div class="pdui-modal-body"></div>').append(t),this.$header?this.$header.after(this.$body):this.$footer?this.$footer.before(this.$body):this.$content.append(this.$body)}},e.prototype.createHeader=function(){if(!this.$header){var t=close_1["default"](24,{"class":"pdui-modal-close"}),e=this.getSelector(this.settings.title);this.$header=$('<div class="pdui-modal-head">\n                          <span class="pdui-modal-title"></span>'+t+"\n                    </div>"),this.$header.find(".pdui-modal-title").append(e),this.$content.prepend(this.$header)}},e.prototype.getSelector=function(t){return t instanceof Function?t(this.settings):t},e.prototype.initTemplate=function(){var t=this.settings.cls||"",e=$('<div class="pdui-modal pdvis-namespace '+t+'" data-pdui-modal-effect="1">\n                <div class="pdui-modal-content"></div>\n            </div>');if(this.$content=e.find(".pdui-modal-content"),this.settings.title&&this.createHeader(),this.settings.body&&this.createBody(),this.settings.buttons&&this.settings.buttons.length){this.$footer=$('<div class="pdui-modal-foot"></div>');for(var o=0,i=this.settings.buttons;o<i.length;o++){var n=i[o],s=$(button_1.PdUIButton.create(n.settings));for(var d in n.events)n.events.hasOwnProperty(d)&&s.on(d,n.events[d]);this.$footer.append(s)}this.$content.append(this.$footer)}return e.appendTo(this.settings.parent),e},e.prototype.initSettings=function(o){return $.extend(!0,{},t.prototype.initSettings.call(this,e.defaultSettings),o)},e.defaultSettings={parent:"body"},e}(component_1.PdComponent);exports.PdVisModal=PdVisModal;